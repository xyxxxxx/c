计算机执行**机器代码**，用字节序列编码低级的操作，包括处理数据、管理内存、读写存储设备上的数据，以及网络通信。编译器基于编程语言的规则、目标机器的指令集和操作系统遵循的惯例，经过一系列的阶段生成机器代码。GCC C语言编译器以**汇编代码**的形式产生输出，汇编代码是机器代码的文本表示，给出程序中的每一条指令。然后GCC 调用汇编器和链接器，根据汇编代码生成可执行的机器代码。

当我们用高级语言编程的时候，机器屏蔽了程序的细节，即机器级的实现。与此相反，当用汇编代码编程时，程序员必须指定程序用来执行计算的低级指令。高级语言提供的抽象级别比较高，大多数时候，在这种抽象级别上工作效率会更高，也更可靠。通常情况下，使用现代的优化编译器产生的代码至少与一个熟练的汇编语言程序员手工编写代码一样有效。最大的优点是，用高级语言编写的程序可以在很多不同的机器上编译和执行，而汇编代码则是与特定机器密切相关。

尽管如此，阅读和理解汇编代码仍然是一项很重要的技能。以适当的命令行选项调用编译器，编译器就会产生一个以汇编代码形式表示的输出文件。通过阅读这些汇编代码，我们能够理解编译器的优化能力，并分析代码中隐含的低效率。试图最大化一段关键代码性能的程序员，通常会尝试源代码的各种形式，每次编译并检查产生的汇编代码，从而了解程序将要运行的效率如何。也有些时候高级语言提供的抽象层会隐藏我们想要了解的程序的运行时行为。

x86-64是现在笔记本电脑和台式机中最常见处理器的机器语言，也是驱动大型数据中心和超级计算机的最常见处理器的机器语言。这种语言历史悠久，起源于Intel公司1978年的第一个16位处理器，然后扩展到32位，64位。





# 历史观点

Intel处理器系列俗称x86，经历了一个长期的、不断进化的发展过程。

Intel处理器模型介绍略。

近年来许多公司生产出了与Intel处理器兼容的处理器，能够运行完全相同的机器级程序，其中领头的是AMD。





# 程序编码

假设一个
C程序有两个文件`p1.c`和`p2.c`，我们用Unix命令行编译这些代码：

```
$ gcc -)g -o p p1.c p2.c
```

命令`gcc`指的就是GCC C编译器，这是Linux上默认的编译器。编译选项`-Og`告诉编译器使用会生成符合原始C代码整体结构的机器代码的优化等级。使用更高级别优化（如`-O1`或`-O2`）产生的代码会严重变形，以至于产生的机器代码和初始源代码之间的关系非常难以理解，但从得到的程序的性能考虑，更高级别的优化是更高的选择。



## 机器级代码

对于机器级编程来说，两种抽象十分重要。第一种是由**指令集体系结构**或**指令集架构（ISA，Instruction Set Architecture）**来定义机器级程序的格式和行为，它包括了处理器状态、指令的格式，以及每条指令对状态的影响。大多数ISA，包括x86-64，将程序的行为描述成好像每条指令都是按照顺序执行的。处理器的硬件远比描述的精细复杂，它们并发地执行许多指令，但是可以采取措施保证整体行为与ISA指定的顺序执行的行为完全一致。第二种是